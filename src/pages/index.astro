---
import Layout from '../organisms/Layout.astro';
import { css } from '../../styled-system/css';
import { BodyLayout } from '../lib/layout';
import { center } from '../../styled-system/patterns';
import { readFile } from 'fs/promises';

import BlogPostList from '../molecules/BlogPostList.astro';
import ProjectList from '../molecules/ProjectList.astro';

interface LyricsProps {
  songTitle: string;
  artist: string;
  lyrics: string;
  source: string;
}

const lyricsData: LyricsProps[] = JSON.parse(
  await readFile('public/data/lyrics.json', 'utf-8')
);
const lyric = lyricsData[Math.floor(Math.random() * lyricsData.length)];
---

<Layout title="m1sk9's portfolio">
  <body>
    <div
      class={center({
        flexDirection: 'column',
        justifyContent: 'center',
        alignItems: 'center',
        mb: 10
      })}
    >
      <img
        class={css({ borderRadius: 50 })}
        src="./icon.jpg"
        width="100"
        height="100"
        alt="m1sk9 のアイコン"
      />
      <h1 class={css({ textStyle: 'h1', mt: 2 })}>m1sk9</h1>
    </div>

    <div class={BodyLayout()}>
      <div>
        <h2 class={css({ textStyle: 'h2' })}>Projects</h2>
        <ProjectList />
      </div>

      <div>
        <h2 class={css({ textStyle: 'h2' })}>Latest Articles</h2>
        <BlogPostList />
      </div>
    </div>

    <div
      class={css({
        mt: 20,
        display: 'flex',
        flexDirection: 'column',
        justifyContent: 'center',
        alignItems: 'center'
      })}
    >
      {
        (
          <>
            <p class={css({ textStyle: 'caption', fontSize: '15px' })}>
              {lyric.lyrics}
            </p>
            <a
              href={lyric.source}
              class={css({ textStyle: 'caption', color: 'gray', mt: 2 })}
            >
              {lyric.songTitle} - {lyric.artist}
            </a>
          </>
        )
      }
    </div>
  </body>
</Layout>
