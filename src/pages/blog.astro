---
import Layout from '../organisms/Layout.astro';
import { css } from '../../styled-system/css';
import { center, grid } from '../../styled-system/patterns';

const allBlogPosts = await Astro.glob('./blog/posts/**/*.md');
---

<Layout title="m1sk9's blog" description="m1sk9's blog">
  <body>
    <div
      class={center({
        flexDirection: 'column',
        h: 'full',
        mb: 10,
        gap: 3
      })}
    >
      <h1 class={css({ textStyle: 'h1' })}>Blog (Back number)</h1>
    </div>
    <div>
      <div class={grid({ gridTemplateColumns: 2, gap: 3, mt: 3 })}>
        {
          allBlogPosts
            .sort(
              (a, b) =>
                new Date(b.frontmatter.date).getTime() -
                new Date(a.frontmatter.date).getTime()
            )
            .filter((post) => post.frontmatter.published)
            .map((post) => (
              <article class={css({ border: '1px dashed gray', p: 3 })}>
                <a href={post.url}>
                  <p
                    class={css({
                      fontSize: 12,
                      color: 'gray'
                    })}
                  >
                    {post.frontmatter.date}
                  </p>
                  <p
                    class={css({
                      fontSize: 16
                    })}
                  >
                    {post.frontmatter.title}
                  </p>
                  <p
                    class={css({
                      textStyle: 'caption',
                      color: 'gray'
                    })}
                  >
                    {post.frontmatter.description}
                  </p>
                </a>
              </article>
            ))
        }
      </div>
    </div>
  </body>
</Layout>
